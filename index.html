<!DOCTYPE html><html lang="en" is="sparky" class="js"><head>
    <meta charset="utf-8">

    <meta name="author" content="@stephband">
    <meta name="description" content="Documentation for Fn. A library of functions, functors and streams.">
    <meta name="viewport" content="width=device-width">

    <title>Fn</title>

    <script>
    document.documentElement.className = 'js';
    window.DEBUG = true;
    </script>

    <link rel="shortcut icon" href="images/logo-64x64.ico">
    <link rel="icon" type="image/png" href="images/logo-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="images/logo-64x64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="images/logo-128x128.png" sizes="128x128">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700">
    <link rel="stylesheet" href="../bolt/dist/bolt.css">
    <link rel="stylesheet" href="../dom/css/dom.css">
    <link rel="stylesheet" href="../fn/css/prism.cruncher.css">
    <link rel="stylesheet" href="../fn/css/tests.css">
    <link rel="stylesheet" href="css/docs.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="../soundstage/css/respond.css">
<template id="header-template" title="/fn/">
    <header class="grid" id="header">
        <h1 class="col-1 span-7 @2-col-2">{[title]} <span class="text-6">{[version]}</span></h1>

        <div class="col-1 span-7 @2-col-2 @3-span-6 @4-span-5 @5-span-3">
            <p class="text-8">
                {[description]}
            </p>

            <ul class="link-index index">
                <li><strong>repo:</strong> <a href="{[repository.url]}">{[repository.url]}</a></li>
                <li><strong>bugs:</strong> <a href="{[bugs.url]}">{[bugs.url]}</a></li>
            </ul>
        </div>
    </header>
</template><template id="title-template" title="/fn/">
    <h3 class="text-4">{[name]}</h3>
</template><template id="method-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="function language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="property-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="property language-js"></code>
            </a>
        </h3>
    </article>
</template><template id="function-template" title="/fn/">
    <article build-fn="append:body" class="toggle-block block" toggleable="" id="{[id]}">
        <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
            <a href="#{[id]}">
                <code build-fn="append:title" class="function language-js"></code>
            </a>
        </h3>
    </article>
</template></head>

<body>
    

    <section class="grid" style="grid-gap: 1.875rem;">
        <!--header class="col-1 span-7 @1-col-1 @1-span-6 @2-col-2 @4-col-2 @4-span-4 @5-col-2 @5-span-3">
            <h2 class="text-2" style="font-size: 1.875rem;">Stream</h2>
        </header-->

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h2 class="text-1">Functions</h2>

            <h4 class="text-4">Functions</h4>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="cache-fn">
        <h3 class="text-5 ">
            <a href="#cache-fn">
                <code class="function language-js"><span class="token function">cache</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that caches the return values of <code>fn()</code>
against input values in a map, such that for each input value
<code>fn</code> is only ever called once.</p>
</article>

    <article class="toggle-block block" toggleable="" id="compose-fn2-fn1">
        <h3 class="text-5 ">
            <a href="#compose-fn2-fn1">
                <code class="function language-js"><span class="token function">compose</span><span class="token punctuation">(</span>fn2<span class="token punctuation">,</span> fn1<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="curry-fn-muteable-arity">
        <h3 class="text-5 ">
            <a href="#curry-fn-muteable-arity">
                <code class="function language-js"><span class="token function">curry</span><span class="token punctuation">(</span>fn <span class="token punctuation">[</span><span class="token punctuation">,</span> muteable<span class="token punctuation">,</span> arity<span class="token punctuation">]</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="choose-fn-map">
        <h3 class="text-5 ">
            <a href="#choose-fn-map">
                <code class="function language-js"><span class="token function">choose</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> map<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that takes its first argument as a key and uses it
to select a function in <code>map</code> which is invoked with the remaining arguments.</p>
<p>Where <code>map</code> has a function <code>default</code>, that function is run when a key
is not found, otherwise unfound keys will error.</p>
<pre><code><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'fish'</span><span class="token punctuation">:</span>  <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'chips'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'fish'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Calls fn1(a, b)</span></code></pre></article>

    <article class="toggle-block block" toggleable="" id="once-fn">
        <h3 class="text-5 ">
            <a href="#once-fn">
                <code class="function language-js"><span class="token function">once</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="overload-fn-map">
        <h3 class="text-5 ">
            <a href="#overload-fn-map">
                <code class="function language-js"><span class="token function">overload</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> map<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that calls a function at the property of <code>object</code> that
matches the result of calling <code>fn</code> with all arguments.</p><p></p>
<pre><code><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">overload</span><span class="token punctuation">(</span>toType<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    string<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    number<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">'pie'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Returns a('pie', 4)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Returns b(1, 2)</span></code></pre></article>

    <article class="toggle-block block" toggleable="" id="pipe-fn1-fn2">
        <h3 class="text-5 ">
            <a href="#pipe-fn1-fn2">
                <code class="function language-js"><span class="token function">pipe</span><span class="token punctuation">(</span>fn1<span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="weakcache-fn">
        <h3 class="text-5 ">
            <a href="#weakcache-fn">
                <code class="function language-js"><span class="token function">weakCache</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that caches the return values of <code>fn()</code>
against input values in a WeakMap, such that for each input value
<code>fn</code> is only ever called once.</p>
</article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h4 class="text-4">Objects</h4>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="argument-n">
        <h3 class="text-5 ">
            <a href="#argument-n">
                <code class="function language-js"><span class="token function">argument</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that returns its nth argument when called.</p>
</article>

    <article class="toggle-block block" toggleable="" id="call-fn">
        <h3 class="text-5 ">
            <a href="#call-fn">
                <code class="function language-js"><span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a function that calls <code>fn()</code> with no arguments.</p>
</article>

    <article class="toggle-block block" toggleable="" id="capture-regex-parts-accumulator-string">
        <h3 class="text-5 ">
            <a href="#capture-regex-parts-accumulator-string">
                <code class="function language-js"><span class="token function">capture</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> parts<span class="token punctuation">,</span> accumulator<span class="token punctuation">,</span> string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Parse <code>string</code> with <code>regex</code>, calling functions in <code>parts</code> to modify
<code>accumulator</code>. Returns accumulator.</p>
</article>

    <article class="toggle-block block" toggleable="" id="equals-a-b">
        <h3 class="text-5 ">
            <a href="#equals-a-b">
                <code class="function language-js"><span class="token function">equals</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Perform a deep equality comparison of <code>a</code> and <code>b</code>. Returns <code>true</code> if
they are equal.</p>
</article>

    <article class="toggle-block block" toggleable="" id="exec-regex-fn-string">
        <h3 class="text-5 ">
            <a href="#exec-regex-fn-string">
                <code class="function language-js"><span class="token function">exec</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="get-name-object">
        <h3 class="text-5 ">
            <a href="#get-name-object">
                <code class="function language-js"><span class="token keyword">get</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Get property <code>name</code> of <code>object</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="has-key-value-object">
        <h3 class="text-5 ">
            <a href="#has-key-value-object">
                <code class="function language-js"><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>true</code> if <code>object[key]</code> is strictly equal to <code>value</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="id-object">
        <h3 class="text-5 ">
            <a href="#id-object">
                <code class="function language-js"><span class="token function">id</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>object</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="invoke-name-parameters-object">
        <h3 class="text-5 ">
            <a href="#invoke-name-parameters-object">
                <code class="function language-js"><span class="token function">invoke</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parameters<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="is-a-b">
        <h3 class="text-5 ">
            <a href="#is-a-b">
                <code class="function language-js"><span class="token function">is</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Perform a strict equality check of <code>a === b</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="isdefined-value">
        <h3 class="text-5 ">
            <a href="#isdefined-value">
                <code class="function language-js"><span class="token function">isDefined</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Check for value – where <code>value</code> is <code>undefined</code>, <code>NaN</code> or <code>null</code>, returns
<code>false</code>, otherwise <code>true</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="matches-selector-object">
        <h3 class="text-5 ">
            <a href="#matches-selector-object">
                <code class="function language-js"><span class="token function">matches</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="noop">
        <h3 class="text-5 ">
            <a href="#noop">
                <code class="function language-js"><span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns undefined.</p>
</article>

    <article class="toggle-block block" toggleable="" id="not-value">
        <h3 class="text-5 ">
            <a href="#not-value">
                <code class="function language-js"><span class="token function">not</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>!value</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="parsevalue-units-string">
        <h3 class="text-5 ">
            <a href="#parsevalue-units-string">
                <code class="function language-js"><span class="token function">parseValue</span><span class="token punctuation">(</span>units<span class="token punctuation">,</span> string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="requesttick-fn">
        <h3 class="text-5 ">
            <a href="#requesttick-fn">
                <code class="function language-js"><span class="token function">requestTick</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Call <code>fn</code> on the next tick.</p>
</article>

    <article class="toggle-block block" toggleable="" id="self">
        <h3 class="text-5 ">
            <a href="#self">
                <code class="function language-js"><span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>this</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="set-key-object-value">
        <h3 class="text-5 ">
            <a href="#set-key-object-value">
                <code class="function language-js"><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> object<span class="token punctuation">,</span> value<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="toarray-object">
        <h3 class="text-5 ">
            <a href="#toarray-object">
                <code class="function language-js"><span class="token function">toArray</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="toclass-object">
        <h3 class="text-5 ">
            <a href="#toclass-object">
                <code class="function language-js"><span class="token function">toClass</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="tofixed-number">
        <h3 class="text-5 ">
            <a href="#tofixed-number">
                <code class="function language-js"><span class="token function">toFixed</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="toint-string">
        <h3 class="text-5 ">
            <a href="#toint-string">
                <code class="function language-js"><span class="token function">toInt</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="tostring-object">
        <h3 class="text-5 ">
            <a href="#tostring-object">
                <code class="function language-js"><span class="token function">toString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>object.toString()</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="totype-object">
        <h3 class="text-5 ">
            <a href="#totype-object">
                <code class="function language-js"><span class="token function">toType</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns <code>typeof object</code>.</p>
</article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h4 class="text-4">Numbers</h4>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="mod-divisor-n">
        <h3 class="text-5 ">
            <a href="#mod-divisor-n">
                <code class="function language-js"><span class="token function">mod</span><span class="token punctuation">(</span>divisor<span class="token punctuation">,</span> n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>JavaScript’s modulu operator (<code>%</code>) uses Euclidean division, but for
stuff that cycles through 0 the symmetrics of floored division are often
are more useful.</p>
</article>

    <article class="toggle-block block" toggleable="" id="limit-min-max-n">
        <h3 class="text-5 ">
            <a href="#limit-min-max-n">
                <code class="function language-js"><span class="token function">limit</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> max<span class="token punctuation">,</span> n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="gcd-a-b">
        <h3 class="text-5 ">
            <a href="#gcd-a-b">
                <code class="function language-js"><span class="token function">gcd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="lcm-a-b">
        <h3 class="text-5 ">
            <a href="#lcm-a-b">
                <code class="function language-js"><span class="token function">lcm</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="gaussian">
        <h3 class="text-5 ">
            <a href="#gaussian">
                <code class="function language-js"><span class="token function">gaussian</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Generate a random number with a bell curve probability centred
around 0 with limits -1 to 1.</p>
</article>

    <article class="toggle-block block" toggleable="" id="todb-level">
        <h3 class="text-5 ">
            <a href="#todb-level">
                <code class="function language-js"><span class="token function">todB</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="tolevel-db">
        <h3 class="text-5 ">
            <a href="#tolevel-db">
                <code class="function language-js"><span class="token function">toLevel</span><span class="token punctuation">(</span>dB<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="cubicbezier-point1-point2-duration-x">
        <h3 class="text-5 ">
            <a href="#cubicbezier-point1-point2-duration-x">
                <code class="function language-js"><span class="token function">cubicBezier</span><span class="token punctuation">(</span>point1<span class="token punctuation">,</span> point2<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> x<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Where <code>point1</code> and <code>point2</code> are <code>[x, y]</code> arrays describing control points.</p>
</article>

    <article class="toggle-block block" toggleable="" id="tocartesian-polar">
        <h3 class="text-5 ">
            <a href="#tocartesian-polar">
                <code class="function language-js"><span class="token function">toCartesian</span><span class="token punctuation">(</span>polar<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="topolar-cartesian">
        <h3 class="text-5 ">
            <a href="#topolar-cartesian">
                <code class="function language-js"><span class="token function">toPolar</span><span class="token punctuation">(</span>cartesian<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h4 class="text-4">Arrays</h4>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="by-fn-a-b">
        <h3 class="text-5 ">
            <a href="#by-fn-a-b">
                <code class="function language-js"><span class="token function">by</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Compares <code>fn(a)</code> against <code>fn(b)</code>. Useful for sorting.</p>
</article>

    <article class="toggle-block block" toggleable="" id="insert-fn-array-object">
        <h3 class="text-5 ">
            <a href="#insert-fn-array-object">
                <code class="function language-js"><span class="token function">insert</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> array<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Inserts <code>object</code> into <code>array</code> at the first index where the result of
<code>fn(object)</code> is greater than <code>fn(array[index])</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="last-array">
        <h3 class="text-5 ">
            <a href="#last-array">
                <code class="function language-js"><span class="token function">last</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Gets the last value from an array.</p>
</article>

    <article class="toggle-block block" toggleable="" id="remove-array-value">
        <h3 class="text-5 ">
            <a href="#remove-array-value">
                <code class="function language-js"><span class="token function">remove</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> value<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Remove <code>value</code> from <code>array</code>. Where <code>value</code> is not in <code>array</code>, does nothing.</p>
</article>

    <article class="toggle-block block" toggleable="" id="rest-n-array">
        <h3 class="text-5 ">
            <a href="#rest-n-array">
                <code class="function language-js"><span class="token function">rest</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> array<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="take-n-array">
        <h3 class="text-5 ">
            <a href="#take-n-array">
                <code class="function language-js"><span class="token function">take</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> array<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="unique-array">
        <h3 class="text-5 ">
            <a href="#unique-array">
                <code class="function language-js"><span class="token function">unique</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Takes an array or stream as <code>array</code>, returns an object of the same
type without duplicate values.</p>
</article>

    <article class="toggle-block block" toggleable="" id="update-fn-array-object">
        <h3 class="text-5 ">
            <a href="#update-fn-array-object">
                <code class="function language-js"><span class="token function">update</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> array<span class="token punctuation">,</span> object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Compares the result of calling <code>fn</code> on <code>object</code> to the result of calling <code>fn</code>
on each value in <code>array</code>. If a match is found, <code>object</code> has its properties
assigned to that target, and if not the <code>object</code> is spliced into the
array (preserving a sort order based on the result of <code>fn(object)</code>).</p>
<p>Returns the updated object.</p>
</article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h4 class="text-4">Time</h4>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="parsedate-string">
        <h3 class="text-5 ">
            <a href="#parsedate-string">
                <code class="function language-js"><span class="token function">parseDate</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="parsedatelocal-string">
        <h3 class="text-5 ">
            <a href="#parsedatelocal-string">
                <code class="function language-js"><span class="token function">parseDateLocal</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="formatdatelocal-format-locale-date">
        <h3 class="text-5 ">
            <a href="#formatdatelocal-format-locale-date">
                <code class="function language-js"><span class="token function">formatDateLocal</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> locale<span class="token punctuation">,</span> date<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="formatdateiso-date">
        <h3 class="text-5 ">
            <a href="#formatdateiso-date">
                <code class="function language-js"><span class="token function">formatDateISO</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="formatdatetimeiso-date">
        <h3 class="text-5 ">
            <a href="#formatdatetimeiso-date">
                <code class="function language-js"><span class="token function">formatDateTimeISO</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="today-date">
        <h3 class="text-5 ">
            <a href="#today-date">
                <code class="function language-js"><span class="token function">toDay</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns day of week as a number, where monday is <code>0</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="clonedate-date">
        <h3 class="text-5 ">
            <a href="#clonedate-date">
                <code class="function language-js"><span class="token function">cloneDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns new date object set to same time.</p>
</article>

    <article class="toggle-block block" toggleable="" id="parsetime-string">
        <h3 class="text-5 ">
            <a href="#parsetime-string">
                <code class="function language-js"><span class="token function">parseTime</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="formattime-format-time">
        <h3 class="text-5 ">
            <a href="#formattime-format-time">
                <code class="function language-js"><span class="token function">formatTime</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> time<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="formattimeiso-time">
        <h3 class="text-5 ">
            <a href="#formattimeiso-time">
                <code class="function language-js"><span class="token function">formatTimeISO</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="addtime-time1-time2">
        <h3 class="text-5 ">
            <a href="#addtime-time1-time2">
                <code class="function language-js"><span class="token function">addTime</span><span class="token punctuation">(</span>time1<span class="token punctuation">,</span> time2<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

    <article class="toggle-block block" toggleable="" id="floortime-token-time">
        <h3 class="text-5 ">
            <a href="#floortime-token-time">
                <code class="function language-js"><span class="token function">floorTime</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> time<span class="token punctuation">)</span></code>
            </a>
        </h3>
    </article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-4">
            <h2 class="text-2" style="font-size: 1.875rem;">Observe</h2>

            <!--template-->
    <article class="toggle-block block" toggleable="" id="observe-path-fn-object-init">
        <h3 class="text-5 ">
            <a href="#observe-path-fn-object-init">
                <code class="function language-js"><span class="token function">observe</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> object <span class="token punctuation">[</span><span class="token punctuation">,</span> init<span class="token punctuation">]</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Observe <code>path</code> in <code>object</code> and call <code>fn(value)</code> with the value at the
end of that path when it mutates. Returns a function that destroys this
observer.</p>
<p>The callback <code>fn</code> is called immediately on initialisation if the value at
the end of the path is not equal to <code>init</code>. In the default case where
<code>init</code> is <code>undefined</code>, paths that end in <code>undefined</code> do not cause the
callback to be called.</p>
<p>(To force the callback to always be called on setup, pass in <code>NaN</code> as an
<code>init</code> value. In JS <code>NaN</code> is not equal to anything (even <code>NaN</code>), so it
always initialises.)</p>
</article>

    <article class="toggle-block block" toggleable="" id="observer-object">
        <h3 class="text-5 ">
            <a href="#observer-object">
                <code class="function language-js"><span class="token function">Observer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Create an Observer proxy around <code>object</code>. In order for <code>observe(...)</code> to detect
mutations, changes must be made to this proxy rather than the original
<code>object</code>.</p>
</article>

        </section>

        <header class="col-1 span-6 @2-col-2 @2-span-4">
            <h2 class="text-2" style="font-size: 1.875rem;">Stream</h2>
        </header>

        <!--div class="col-1 span-7 @2-col-2 @3-span-6 @4-span-5 @5-span-3">
            <p>Text things</p>
        </div-->

        <!--div class="col-1 span-7 @2-col-2 @3-span-6 @4-span-5 @5-span-3" build-fn="docs:'./modules/stream.js'"></div-->

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-2 @2-span-2">
            <!--template-->
    <h3 class="text-4">Construct</h3>

    <article class="toggle-block block" toggleable="" id="stream-fn">
        <h3 class="text-5 ">
            <a href="#stream-fn">
                <code class="function language-js"><span class="token function">Stream</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Construct a new stream. The <code>new</code> keyword is optional. <code>fn(notify, stop)</code> is
invoked when the stream is started: it must return a source object – a
‘producer’ – with the method <code>.shift()</code> and optionally methods <code>.push()</code>,
<code>.start()</code> and <code>.stop()</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="stream-from-values">
        <h3 class="text-5 ">
            <a href="#stream-from-values">
                <code class="function language-js">Stream<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a writeable stream that consumes the array or array-like <code>values</code> as
its source.</p>
</article>

    <article class="toggle-block block" toggleable="" id="stream-frompromise-promise">
        <h3 class="text-5 ">
            <a href="#stream-frompromise-promise">
                <code class="function language-js">Stream<span class="token punctuation">.</span><span class="token function">fromPromise</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a stream that uses the given promise as its source. When the promise
resolves the stream is given its value and stopped. If the promise errors
the stream is stopped without value. This stream is not writeable: it has no
<code>.push()</code> method.</p>
</article>

    <article class="toggle-block block" toggleable="" id="stream-fromtimer-timer">
        <h3 class="text-5 ">
            <a href="#stream-fromtimer-timer">
                <code class="function language-js">Stream<span class="token punctuation">.</span><span class="token function">fromTimer</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Create a stream from a timer object. A timer object must look like:</p>
<pre><code><span class="token punctuation">{</span>
    request<span class="token punctuation">:</span>     <span class="token function">fn</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">,</span> calls fn on the next frame<span class="token punctuation">,</span> returns an id
    cancel<span class="token punctuation">:</span>      <span class="token function">fn</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span> cancels request <span class="token keyword">with</span> id
    now<span class="token punctuation">:</span>         <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> returne the time
    currentTime<span class="token punctuation">:</span> time at the start <span class="token keyword">of</span> the latest frame
<span class="token punctuation">}</span></code></pre><p>This stream is not writeable: it has no <code>.push()</code> method.</p>
</article>

    <article class="toggle-block block" toggleable="" id="stream-of-values">
        <h3 class="text-5 ">
            <a href="#stream-of-values">
                <code class="function language-js">Stream<span class="token punctuation">.</span><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token operator">...</span>values<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Returns a writeable stream that uses arguments as its source.</p>
</article>

        </section>

        <section class="col-1 span-7 @1-col-1 @1-span-3 @2-col-4 @2-span-2">
            <!--template-->
    <h3 class="text-4">Write</h3>

    <article class="toggle-block block" toggleable="" id="push-value">
        <h3 class="text-5 dot-indent">
            <a href="#push-value">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Pushes a <code>value</code> (or multiple values) into the head of the stream. If the
    stream is not writeable, it does not have a <code>.push()</code> method.</p>
</article>

    <h3 class="text-4">Transform</h3>

    <article class="toggle-block block" toggleable="" id="chunk-n">
        <h3 class="text-5 dot-indent">
            <a href="#chunk-n">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">chunk</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Batches values into arrays of length <code>n</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="clone">
        <h3 class="text-5 dot-indent">
            <a href="#clone">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Creates copy of the stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="dedup">
        <h3 class="text-5 dot-indent">
            <a href="#dedup">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">dedup</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Filters out consecutive equal values.</p>
</article>

    <article class="toggle-block block" toggleable="" id="filter-fn">
        <h3 class="text-5 dot-indent">
            <a href="#filter-fn">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Filter values according to the truthiness of <code>fn(value)</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="flatten">
        <h3 class="text-5 dot-indent">
            <a href="#flatten">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Flattens a stream of streams or arrays into a single stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="flatmap">
        <h3 class="text-5 dot-indent">
            <a href="#flatmap">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Maps values to lists – <code>fn(value)</code> must return an array, functor, stream
    or other type with a <code>.shift()</code> method – and flattens those lists into a
    single stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="latest">
        <h3 class="text-5 dot-indent">
            <a href="#latest">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">latest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>When the stream has a values buffered, passes the last value
    in the buffer.</p>
</article>

    <article class="toggle-block block" toggleable="" id="map-fn">
        <h3 class="text-5 dot-indent">
            <a href="#map-fn">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Maps values to the result of <code>fn(value)</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="merge-stream">
        <h3 class="text-5 dot-indent">
            <a href="#merge-stream">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Merges this stream with <code>stream</code>, which in fact may be an array, array-like
    or functor.</p>
</article>

    <article class="toggle-block block" toggleable="" id="rest-n">
        <h3 class="text-5 dot-indent">
            <a href="#rest-n">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">rest</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Filters the stream to the <code>n</code>th value and above.</p>
</article>

    <article class="toggle-block block" toggleable="" id="scan-fn-seed">
        <h3 class="text-5 dot-indent">
            <a href="#scan-fn-seed">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> seed<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Calls <code>fn(accumulator, value)</code> and emits <code>accumulator</code> for each value
    in the stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="take-n">
        <h3 class="text-5 dot-indent">
            <a href="#take-n">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Filters the stream to the first <code>n</code> values.</p>
</article>

    <h3 class="text-4">Delay</h3>

    <article class="toggle-block block" toggleable="" id="clock-timer">
        <h3 class="text-5 dot-indent">
            <a href="#clock-timer">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">clock</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Emits values at the framerate of <code>timer</code>, one-per-frame. No values
    are discarded.</p>
</article>

    <article class="toggle-block block" toggleable="" id="throttle-timer">
        <h3 class="text-5 dot-indent">
            <a href="#throttle-timer">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Throttles values such that on each frame of <code>timer</code> the latest value
    is emitted. Other values are discarded.</p>
</article>

    <article class="toggle-block block" toggleable="" id="wait-time">
        <h3 class="text-5 dot-indent">
            <a href="#wait-time">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Emits the latest value only after <code>time</code> seconds of inactivity.
    Intermediate values are discarded.</p>
</article>

    <h3 class="text-4">Consume</h3>

    <article class="toggle-block block" toggleable="" id="each-fn">
        <h3 class="text-5 dot-indent">
            <a href="#each-fn">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Thirstilly consumes the stream, calling <code>fn(value)</code> whenever
    a value is available.</p>
</article>

    <article class="toggle-block block" toggleable="" id="last-fn">
        <h3 class="text-5 dot-indent">
            <a href="#last-fn">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Consumes the stream when stopped, calling <code>fn(value)</code> with the
    last value read from the stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="reduce-fn-accumulator">
        <h3 class="text-5 dot-indent">
            <a href="#reduce-fn-accumulator">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> accumulator<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Consumes the stream when stopped, calling <code>fn(accumulator, value)</code>
    for each value in the stream. Returns a promise that resolves to
    the last value returned by <code>fn(accumulator, value)</code>.</p>
</article>

    <article class="toggle-block block" toggleable="" id="shift">
        <h3 class="text-5 dot-indent">
            <a href="#shift">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Reads a value from the stream. If no values are in the stream, returns
    <code>undefined</code>. If this is the last value in the stream, <code>streams.status</code>
    is <code>'done'</code>.</p>
</article>

    <h3 class="text-4">Lifecycle</h3>

    <article class="toggle-block block" toggleable="" id="done-fn">
        <h3 class="text-5 dot-indent">
            <a href="#done-fn">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Calls <code>fn()</code> after the stream is stopped and all values have been drained.</p>
</article>

    <article class="toggle-block block" toggleable="" id="start">
        <h3 class="text-5 dot-indent">
            <a href="#start">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>If the stream’s producer is startable, starts the stream.</p>
</article>

    <article class="toggle-block block" toggleable="" id="stop">
        <h3 class="text-5 dot-indent">
            <a href="#stop">
                <code class="function language-js"><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>
            </a>
        </h3>
    <p>Stops the stream. No more values can be pushed to the stream and any
    consumers added will do nothing. However, depending on the stream’s source
    the stream may yet drain any buffered values into an existing consumer
    before entering <code>'done'</code> state. Once in <code>'done'</code> state a stream is
    entirely inert.</p>
</article>

        </section>

        <section class="col-1 span-7 @1-col-4 @1-span-4 @2-col-6 @2-span-2">
            <!--template-->
    <h3 class="text-4">Properties</h3>

    <article class="toggle-block block" toggleable="" id="statusundefined">
        <h3 class="text-5 dot-indent">
            <a href="#statusundefined">
                <code class="property language-js">.status</code>
            </a>
        </h3>
    <p>Reflects the running status of the stream. When all values have been consumed
status is <code>'done'</code>.</p>
</article>

        </section>
    </section>

    <!-- Build document -->
    

    <!-- Document interactivity -->
    <script type="module">
        import '../dom/js/device.js';
        import '../dom/js/toggleable.js';
    </script>

</body></html>